import{aa as R,r as n,j as e,B as j,T as i,o as N,ab as q,D as U,b as B}from"./index-CULAPTGC.js";import{G as r}from"./Grid-CUnqLD39.js";import{C as p,a as f}from"./CardContent-54JzbSmJ.js";import{T as l}from"./TextField-BUPMHrHm.js";import"./Select-DuIBlwhn.js";const k=()=>{var E;const{user:t}=R(),[g,T]=n.useState((t==null?void 0:t.name)||""),[m,A]=n.useState((t==null?void 0:t.email)||""),[w,v]=n.useState(""),[x,b]=n.useState(""),[P,y]=n.useState(""),[o,d]=n.useState(!1),[C,c]=n.useState(null),[S,a]=n.useState(null),W=async s=>{if(s.preventDefault(),c(null),a(null),!g.trim()){a("Name is required");return}if(!m.trim()){a("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)){a("Please enter a valid email address");return}try{d(!0),await new Promise(h=>setTimeout(h,1e3)),c("Profile updated successfully")}catch(h){a(h.message||"Failed to update profile")}finally{d(!1)}},D=async s=>{if(s.preventDefault(),c(null),a(null),!w){a("Current password is required");return}if(x.length<6){a("New password must be at least 6 characters");return}if(x!==P){a("Passwords do not match");return}try{d(!0),await new Promise(u=>setTimeout(u,1e3)),c("Password updated successfully"),v(""),b(""),y("")}catch(u){a(u.message||"Failed to update password")}finally{d(!1)}};return e.jsxs(j,{children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"User Profile"}),C&&e.jsx(N,{severity:"success",sx:{mb:3},children:C}),S&&e.jsx(N,{severity:"error",sx:{mb:3},children:S}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(p,{children:e.jsxs(f,{sx:{textAlign:"center"},children:[e.jsx(q,{sx:{width:100,height:100,mx:"auto",mb:2,bgcolor:"primary.main",fontSize:"3rem"},children:(E=t==null?void 0:t.name)==null?void 0:E.charAt(0).toUpperCase()}),e.jsx(i,{variant:"h6",children:t==null?void 0:t.name}),e.jsx(i,{variant:"body2",color:"text.secondary",children:t==null?void 0:t.email}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Role: ",t==null?void 0:t.role]})]})})}),e.jsxs(r,{item:!0,xs:12,md:8,children:[e.jsx(p,{sx:{mb:3},children:e.jsxs(f,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Edit Profile"}),e.jsx(U,{sx:{mb:3}}),e.jsx(j,{component:"form",onSubmit:W,children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(l,{label:"Name",fullWidth:!0,value:g,onChange:s=>T(s.target.value)})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(l,{label:"Email",fullWidth:!0,value:m,onChange:s=>A(s.target.value)})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(B,{type:"submit",variant:"contained",disabled:o,children:o?"Updating...":"Update Profile"})})]})})]})}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Change Password"}),e.jsx(U,{sx:{mb:3}}),e.jsx(j,{component:"form",onSubmit:D,children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(l,{label:"Current Password",type:"password",fullWidth:!0,value:w,onChange:s=>v(s.target.value)})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(l,{label:"New Password",type:"password",fullWidth:!0,value:x,onChange:s=>b(s.target.value)})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(l,{label:"Confirm New Password",type:"password",fullWidth:!0,value:P,onChange:s=>y(s.target.value)})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(B,{type:"submit",variant:"contained",disabled:o,children:o?"Updating...":"Change Password"})})]})})]})})]})]})]})};export{k as default};
