import{a9 as D,r as a,j as e,B as j,T as i,o as E,aa as R,D as N,b as U}from"./index-rhtMhrmY.js";import{G as t}from"./Grid-Blo8clda.js";import{C as p,a as f}from"./CardContent-SYm06Clu.js";import{T as l}from"./TextField-CnGW7clw.js";import"./Select-J-o6GK_T.js";const $=()=>{const{user:n}=D(),[g,B]=a.useState(n?.name||""),[m,T]=a.useState(n?.email||""),[w,v]=a.useState(""),[x,P]=a.useState(""),[b,y]=a.useState(""),[o,d]=a.useState(!1),[C,u]=a.useState(null),[S,r]=a.useState(null),A=async s=>{if(s.preventDefault(),u(null),r(null),!g.trim()){r("Name is required");return}if(!m.trim()){r("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)){r("Please enter a valid email address");return}try{d(!0),await new Promise(h=>setTimeout(h,1e3)),u("Profile updated successfully")}catch(h){r(h.message||"Failed to update profile")}finally{d(!1)}},W=async s=>{if(s.preventDefault(),u(null),r(null),!w){r("Current password is required");return}if(x.length<6){r("New password must be at least 6 characters");return}if(x!==b){r("Passwords do not match");return}try{d(!0),await new Promise(c=>setTimeout(c,1e3)),u("Password updated successfully"),v(""),P(""),y("")}catch(c){r(c.message||"Failed to update password")}finally{d(!1)}};return e.jsxs(j,{children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"User Profile"}),C&&e.jsx(E,{severity:"success",sx:{mb:3},children:C}),S&&e.jsx(E,{severity:"error",sx:{mb:3},children:S}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(p,{children:e.jsxs(f,{sx:{textAlign:"center"},children:[e.jsx(R,{sx:{width:100,height:100,mx:"auto",mb:2,bgcolor:"primary.main",fontSize:"3rem"},children:n?.name?.charAt(0).toUpperCase()}),e.jsx(i,{variant:"h6",children:n?.name}),e.jsx(i,{variant:"body2",color:"text.secondary",children:n?.email}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Role: ",n?.role]})]})})}),e.jsxs(t,{item:!0,xs:12,md:8,children:[e.jsx(p,{sx:{mb:3},children:e.jsxs(f,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Edit Profile"}),e.jsx(N,{sx:{mb:3}}),e.jsx(j,{component:"form",onSubmit:A,children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"Name",fullWidth:!0,value:g,onChange:s=>B(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"Email",fullWidth:!0,value:m,onChange:s=>T(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(U,{type:"submit",variant:"contained",disabled:o,children:o?"Updating...":"Update Profile"})})]})})]})}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Change Password"}),e.jsx(N,{sx:{mb:3}}),e.jsx(j,{component:"form",onSubmit:W,children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"Current Password",type:"password",fullWidth:!0,value:w,onChange:s=>v(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"New Password",type:"password",fullWidth:!0,value:x,onChange:s=>P(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"Confirm New Password",type:"password",fullWidth:!0,value:b,onChange:s=>y(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(U,{type:"submit",variant:"contained",disabled:o,children:o?"Updating...":"Change Password"})})]})})]})})]})]})]})};export{$ as default};
