import{a8 as D,r as a,j as e,B as p,T as n,a9 as R,D as E,b as N}from"./index-B2L3gPUG.js";import{A as U}from"./Alert-xxHH2Rwm.js";import{G as t}from"./Grid-PujVX0v3.js";import{C as j,a as f}from"./CardContent-CJzbN8FX.js";import{T as l}from"./TextField-G9XJgXgX.js";import"./Select--REw-QMz.js";const k=()=>{const{user:i}=D(),[g,A]=a.useState(i?.name||""),[m,B]=a.useState(i?.email||""),[w,v]=a.useState(""),[x,P]=a.useState(""),[b,y]=a.useState(""),[o,d]=a.useState(!1),[C,u]=a.useState(null),[S,r]=a.useState(null),T=async s=>{if(s.preventDefault(),u(null),r(null),!g.trim()){r("Name is required");return}if(!m.trim()){r("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)){r("Please enter a valid email address");return}try{d(!0),await new Promise(h=>setTimeout(h,1e3)),u("Profile updated successfully")}catch(h){r(h.message||"Failed to update profile")}finally{d(!1)}},W=async s=>{if(s.preventDefault(),u(null),r(null),!w){r("Current password is required");return}if(x.length<6){r("New password must be at least 6 characters");return}if(x!==b){r("Passwords do not match");return}try{d(!0),await new Promise(c=>setTimeout(c,1e3)),u("Password updated successfully"),v(""),P(""),y("")}catch(c){r(c.message||"Failed to update password")}finally{d(!1)}};return e.jsxs(p,{children:[e.jsx(n,{variant:"h4",gutterBottom:!0,children:"User Profile"}),C&&e.jsx(U,{severity:"success",sx:{mb:3},children:C}),S&&e.jsx(U,{severity:"error",sx:{mb:3},children:S}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(j,{children:e.jsxs(f,{sx:{textAlign:"center"},children:[e.jsx(R,{sx:{width:100,height:100,mx:"auto",mb:2,bgcolor:"primary.main",fontSize:"3rem"},children:i?.name?.charAt(0).toUpperCase()}),e.jsx(n,{variant:"h6",children:i?.name}),e.jsx(n,{variant:"body2",color:"text.secondary",children:i?.email}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Role: ",i?.role]})]})})}),e.jsxs(t,{item:!0,xs:12,md:8,children:[e.jsx(j,{sx:{mb:3},children:e.jsxs(f,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Edit Profile"}),e.jsx(E,{sx:{mb:3}}),e.jsx(p,{component:"form",onSubmit:T,children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"Name",fullWidth:!0,value:g,onChange:s=>A(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"Email",fullWidth:!0,value:m,onChange:s=>B(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(N,{type:"submit",variant:"contained",disabled:o,children:o?"Updating...":"Update Profile"})})]})})]})}),e.jsx(j,{children:e.jsxs(f,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Change Password"}),e.jsx(E,{sx:{mb:3}}),e.jsx(p,{component:"form",onSubmit:W,children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"Current Password",type:"password",fullWidth:!0,value:w,onChange:s=>v(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"New Password",type:"password",fullWidth:!0,value:x,onChange:s=>P(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(l,{label:"Confirm New Password",type:"password",fullWidth:!0,value:b,onChange:s=>y(s.target.value)})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(N,{type:"submit",variant:"contained",disabled:o,children:o?"Updating...":"Change Password"})})]})})]})})]})]})]})};export{k as default};
